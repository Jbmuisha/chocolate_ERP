{% extends "layout.html" %} {% block content %}

<div class="max-w-2xl mx-auto bg-white p-6 rounded shadow-md">
  <h2 class="text-xl font-semibold mb-4 text-rose-600">
    {{ 'Edit Inventory' if item_to_edit else 'Add Inventory' }}
  </h2>

  <form method="POST" action="{{ url_for('add_inventory') }}" class="space-y-4">
    {% if item_to_edit %}
    <input type="hidden" name="item_id" value="{{ item_to_edit.id }}" />
    {% endif %}
    <!-- rest of your form inputs -->

    <div>
      <label class="block text-sm font-medium">Product Name</label>
      <input
        type="text"
        name="product_name"
        required
        class="w-full mt-1 p-2 border rounded"
        value="{{ item_to_edit.name if item_to_edit else '' }}"
      />
    </div>

    <div>
      <label class="block text-sm font-medium">Category</label>
      <input
        type="text"
        name="category"
        class="w-full mt-1 p-2 border rounded"
        value="{{ item_to_edit.category if item_to_edit else '' }}"
      />
    </div>

    <div>
      <label class="block text-sm font-medium">Quantity</label>
      <input
        type="number"
        name="quantity"
        required
        class="w-full mt-1 p-2 border rounded"
        value="{{ item_to_edit.quantity if item_to_edit else '' }}"
      />
    </div>

    <div>
      <label class="block text-sm font-medium">Price (USD)</label>
      <input
        type="number"
        step="0.01"
        name="price"
        class="w-full mt-1 p-2 border rounded"
        value="{{ item_to_edit.price if item_to_edit else '' }}"
      />
    </div>

    <div>
      <label class="block text-sm font-medium">Location</label>
      <input
        type="text"
        name="location"
        class="w-full mt-1 p-2 border rounded"
        value="{{ item_to_edit.location if item_to_edit else '' }}"
      />
    </div>

    <div>
      <label class="block text-sm font-medium">Notes</label>
      <textarea name="notes" rows="3" class="w-full mt-1 p-2 border rounded">
{{ item_to_edit.notes if item_to_edit else '' }}</textarea
      >
    </div>

    <button
      type="submit"
      class="bg-rose-600 text-white px-4 py-2 rounded hover:bg-rose-700"
    >
      {{ 'Update Inventory' if item_to_edit else 'Add Inventory' }}
    </button>
  </form>
</div>

<!-- Inventory Table -->
<div class="max-w-5xl mx-auto mt-10 bg-white p-6 rounded shadow-md">
  <h2 class="text-xl font-semibold mb-4 text-gray-800">Current Inventory</h2>
  <div class="overflow-x-auto">
    <table class="min-w-full border text-sm">
      <thead class="bg-gray-100">
        <tr>
          <th class="border px-4 py-2">Product</th>
          <th class="border px-4 py-2">Category</th>
          <th class="border px-4 py-2">Quantity</th>
          <th class="border px-4 py-2">Price</th>
          <th class="border px-4 py-2">Location</th>
          <th class="border px-4 py-2">Notes</th>
          <th class="border px-4 py-2">Updated</th>
          <th class="border px-4 py-2">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for item in inventory %}
        <tr>
          <td class="border px-4 py-2">{{ item.name }}</td>
          <td class="border px-4 py-2">{{ item.category }}</td>
          <td class="border px-4 py-2">{{ item.quantity }}</td>
          <td class="border px-4 py-2">${{ item.price }}</td>
          <td class="border px-4 py-2">{{ item.location }}</td>
          <td class="border px-4 py-2">{{ item.notes }}</td>
          <td class="border px-4 py-2">{{ item.updated_at }}</td>
          <td class="border px-4 py-2 space-x-2">
            <a
              href="{{ url_for('edit_inventory', item_id=item.id) }}"
              class="text-blue-600 hover:underline"
              >Edit</a
            >

            <form
              method="POST"
              action="{{ url_for('delete_inventory', item_id=item.id) }}"
              style="display: inline"
              onsubmit="return confirm('Are you sure you want to delete this item?');"
            >
              <button type="submit" class="text-red-600 hover:underline">
                Delete
              </button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="8" class="text-center py-4">No inventory available.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
