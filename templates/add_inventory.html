{% extends "layout.html" %} {% block content %}
<div
  class="bg-white shadow-lg p-8 max-w-4xl w-full mx-auto my-12"
  style="border-radius: 18px"
>
  <h2 class="text-3xl font-bold text-rose-600 mb-8 text-center">
    {{ 'Edit Inventory' if item_to_edit else 'Add Inventory' }}
  </h2>

  <form method="POST" action="{{ url_for('add_inventory') }}" class="space-y-6">
    {% if item_to_edit %}
    <input type="hidden" name="item_id" value="{{ item_to_edit.id }}" />
    {% endif %}

    <div>
      <label class="block text-sm font-semibold text-gray-700"
        >Product Name</label
      >
      <input
        type="text"
        name="product_name"
        required
        class="w-full border border-gray-300 rounded-md px-4 py-2 focus:ring-2 focus:ring-rose-500"
        value="{{ item_to_edit.name if item_to_edit else '' }}"
      />
    </div>

    <div>
      <label class="block text-sm font-semibold text-gray-700">Category</label>
      <input
        type="text"
        name="category"
        class="w-full border border-gray-300 rounded-md px-4 py-2 focus:ring-2 focus:ring-rose-500"
        value="{{ item_to_edit.category if item_to_edit else '' }}"
      />
    </div>

    <div>
      <label class="block text-sm font-semibold text-gray-700">Quantity</label>
      <input
        type="number"
        name="quantity"
        required
        class="w-full border border-gray-300 rounded-md px-4 py-2 focus:ring-2 focus:ring-rose-500"
        value="{{ item_to_edit.quantity if item_to_edit else '' }}"
      />
    </div>

    <div>
      <label class="block text-sm font-semibold text-gray-700"
        >Price (USD)</label
      >
      <input
        type="number"
        step="0.01"
        name="price"
        class="w-full border border-gray-300 rounded-md px-4 py-2 focus:ring-2 focus:ring-rose-500"
        value="{{ item_to_edit.price if item_to_edit else '' }}"
      />
    </div>

    <div>
      <label class="block text-sm font-semibold text-gray-700">Location</label>
      <input
        type="text"
        name="location"
        class="w-full border border-gray-300 rounded-md px-4 py-2 focus:ring-2 focus:ring-rose-500"
        value="{{ item_to_edit.location if item_to_edit else '' }}"
      />
    </div>

    <div>
      <label class="block text-sm font-semibold text-gray-700">Notes</label>
      <textarea
        name="notes"
        rows="3"
        class="w-full border border-gray-300 rounded-md px-4 py-2 focus:ring-2 focus:ring-rose-500"
      >
{{ item_to_edit.notes if item_to_edit else '' }}</textarea
      >
    </div>

    <button
      type="submit"
      class="w-full bg-rose-600 hover:bg-rose-700 text-white font-semibold px-6 py-3 rounded-md shadow-md transition"
    >
      {{ 'Update Inventory' if item_to_edit else 'Add Inventory' }}
    </button>
  </form>
</div>

<!-- Inventory Table -->
<div
  class="bg-white shadow-lg p-8 max-w-6xl w-full mx-auto my-12"
  style="border-radius: 18px"
>
  <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">
    Current Inventory
  </h2>
  <div class="overflow-x-auto">
    <table
      class="min-w-full border border-gray-300 rounded-lg shadow-sm text-sm"
    >
      <thead class="bg-rose-600 text-white">
        <tr>
          <th class="py-3 px-4 text-left">Product</th>
          <th class="py-3 px-4 text-left">Category</th>
          <th class="py-3 px-4 text-left">Quantity</th>
          <th class="py-3 px-4 text-left">Price</th>
          <th class="py-3 px-4 text-left">Location</th>
          <th class="py-3 px-4 text-left">Notes</th>
          <th class="py-3 px-4 text-left">Updated</th>
          <th class="py-3 px-4 text-left">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        {% for item in inventory %}
        <tr>
          <td class="py-2 px-4">{{ item.name }}</td>
          <td class="py-2 px-4">{{ item.category }}</td>
          <td class="py-2 px-4">{{ item.quantity }}</td>
          <td class="py-2 px-4">${{ item.price }}</td>
          <td class="py-2 px-4">{{ item.location }}</td>
          <td class="py-2 px-4">{{ item.notes }}</td>
          <td class="py-2 px-4">{{ item.updated_at }}</td>
          <td class="py-2 px-4 space-x-2">
            <a
              href="{{ url_for('edit_inventory', item_id=item.id) }}"
              class="text-blue-600 hover:underline"
              >Edit</a
            >
            <form
              method="POST"
              action="{{ url_for('delete_inventory', item_id=item.id) }}"
              style="display: inline"
              onsubmit="return confirm('Are you sure you want to delete this item?');"
            >
              <button type="submit" class="text-red-600 hover:underline">
                Delete
              </button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="8" class="text-center py-6 text-gray-500">
            No inventory available.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
