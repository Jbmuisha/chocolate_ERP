{% extends "layout.html" %}

{% block content %}
<div class="max-w-7xl mx-auto mt-10 px-6">
  <div class="bg-white shadow-xl rounded-2xl p-8 border border-gray-200">
    <h2 class="text-3xl font-bold text-rose-600 mb-8 text-center">Inventory Report</h2>

    <form method="POST" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-10">
      <!-- Category Filter -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
        <select name="category" class="w-full rounded-lg border-gray-300 shadow-sm focus:ring-rose-500 focus:border-rose-500">
          <option value="">All</option>
          {% for cat in categories %}
          <option value="{{ cat }}" {% if filters.category == cat %}selected{% endif %}>{{ cat }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Location Filter -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
        <select name="location" class="w-full rounded-lg border-gray-300 shadow-sm focus:ring-rose-500 focus:border-rose-500">
          <option value="">All</option>
          {% for loc in locations %}
          <option value="{{ loc }}" {% if filters.location == loc %}selected{% endif %}>{{ loc }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- From Date -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">From Date</label>
        <input type="date" name="from_date" value="{{ filters.from_date }}"
               class="w-full rounded-lg border-gray-300 shadow-sm focus:ring-rose-500 focus:border-rose-500" />
      </div>

      <!-- To Date -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">To Date</label>
        <input type="date" name="to_date" value="{{ filters.to_date }}"
               class="w-full rounded-lg border-gray-300 shadow-sm focus:ring-rose-500 focus:border-rose-500" />
      </div>

      <!-- Report Type -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Report Type</label>
        <select name="report_type" class="w-full rounded-lg border-gray-300 shadow-sm focus:ring-rose-500 focus:border-rose-500">
          <option value="">All Inventory</option>
          <option value="low_stock" {% if filters.report_type == 'low_stock' %}selected{% endif %}>
            Low Stock (â‰¤10)
          </option>
        </select>
      </div>

      <!-- Submit Button -->
      <div class="flex items-end">
        <button type="submit"
                class="w-full bg-rose-600 text-white font-semibold py-2 rounded-lg hover:bg-rose-700 shadow transition">
          Generate
        </button>
      </div>
    </form>

    {% if items %}
    <div class="overflow-x-auto rounded-lg shadow border border-gray-200">
      <table class="min-w-full text-sm divide-y divide-gray-100">
        <thead class="bg-gray-100 text-gray-700 uppercase tracking-wider text-xs font-semibold">
          <tr>
            <th class="px-5 py-3 text-left">#</th>
            <th class="px-5 py-3 text-left">Name</th>
            <th class="px-5 py-3 text-left">Category</th>
            <th class="px-5 py-3 text-left">Qty</th>
            <th class="px-5 py-3 text-left">Price</th>
            <th class="px-5 py-3 text-left">Location</th>
            <th class="px-5 py-3 text-left">Updated At</th>
            <th class="px-5 py-3 text-left">Notes</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-100">
          {% for item in items %}
          <tr class="hover:bg-gray-50 transition">
            <td class="px-5 py-3 font-medium">{{ loop.index }}</td>
            <td class="px-5 py-3">{{ item.name }}</td>
            <td class="px-5 py-3">{{ item.category }}</td>
            <td class="px-5 py-3">{{ item.quantity }}</td>
            <td class="px-5 py-3">${{ '%.2f' % item.price }}</td>
            <td class="px-5 py-3">{{ item.location }}</td>
            <td class="px-5 py-3">{{ item.updated_at.strftime('%Y-%m-%d') }}</td>
            <td class="px-5 py-3">{{ item.notes }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="mt-8 text-yellow-800 bg-yellow-100 border-l-4 border-yellow-500 p-5 rounded-lg shadow-sm">
      No inventory found for the selected criteria.
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
