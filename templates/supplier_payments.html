{% extends "layout.html" %} {% block content %}
<div
  class="max-w-4xl mx-auto my-12 bg-white shadow-lg rounded-2xl p-10"
  style="border-radius: 18px"
>
  <h1 class="text-3xl font-extrabold text-rose-600 mb-10 text-center">
    Supplier Payments
  </h1>

  <!-- Add Payment Form -->
  <section class="mb-12">
    <form
      action="{{ url_for('supplier_payments') }}"
      method="POST"
      class="space-y-6"
    >
      <div>
        <label for="supplier_id" class="block font-semibold mb-2 text-gray-700"
          >Supplier</label
        >
        <select
          name="supplier_id"
          id="supplier_id"
          required
          class="w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-rose-500 transition"
        >
          <option value="" disabled selected>Select a supplier</option>
          {% for supplier in suppliers %}
          <option value="{{ supplier.id }}">{{ supplier.name }}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label for="amount" class="block font-semibold mb-2 text-gray-700"
          >Amount</label
        >
        <input
          type="number"
          step="0.01"
          min="0"
          name="amount"
          id="amount"
          required
          placeholder="Enter payment amount"
          class="w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-rose-500 transition"
        />
      </div>

      <div>
        <label
          for="payment_method"
          class="block font-semibold mb-2 text-gray-700"
          >Payment Method</label
        >
        <input
          type="text"
          name="payment_method"
          id="payment_method"
          placeholder="e.g. Cash, Bank Transfer"
          class="w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-rose-500 transition"
        />
      </div>

      <div>
        <label for="notes" class="block font-semibold mb-2 text-gray-700"
          >Notes</label
        >
        <textarea
          name="notes"
          id="notes"
          rows="4"
          placeholder="Optional notes"
          class="w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-rose-500 transition resize-none"
        ></textarea>
      </div>

      <button
        type="submit"
        class="w-full bg-rose-600 hover:bg-rose-700 text-white font-semibold py-3 rounded-xl shadow-md transition"
      >
        Record Payment
      </button>
    </form>
  </section>

  <!-- Supplier Payments List -->
  <section>
    <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">
      Recent Payments
    </h2>

    {% if supplier_payments %}
    <div class="overflow-x-auto rounded-xl border border-gray-300 shadow-sm">
      <table class="min-w-full text-left text-sm divide-y divide-gray-200">
        <thead class="bg-rose-100 text-gray-800">
          <tr>
            <th class="px-6 py-3">Supplier</th>
            <th class="px-6 py-3">Amount</th>
            <th class="px-6 py-3">Payment Method</th>
            <th class="px-6 py-3">Notes</th>
            <th class="px-6 py-3">Payment Date</th>
          </tr>
        </thead>
        <tbody class="bg-white">
          {% for payment in supplier_payments %}
          <tr class="hover:bg-rose-50 transition">
            <td class="px-6 py-4 font-medium text-gray-900">
              {{ payment.supplier.name }}
            </td>
            <td class="px-6 py-4 text-rose-600 font-semibold">
              ${{ "%.2f"|format(payment.amount) }}
            </td>
            <td class="px-6 py-4 italic text-gray-600">
              {{ payment.payment_method or '—' }}
            </td>
            <td class="px-6 py-4 text-gray-700">{{ payment.notes or '—' }}</td>
            <td class="px-6 py-4 text-gray-500 text-sm whitespace-nowrap">
              {{ payment.payment_date.strftime('%Y-%m-%d %H:%M') }}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <p class="text-center text-gray-500 italic">
      No supplier payments recorded yet.
    </p>
    {% endif %}
  </section>
</div>
{% endblock %}
